<div class="reset-password-container">
  <div class="card">
    <div class="card-header">
      <h2>Reset Your Password</h2>
      <p>Enter your new password below to complete the reset process.</p>
    </div>
    
    <div class="card-body">
      <!-- Password Reset Form -->
      <form *ngIf="!isPasswordReset" (ngSubmit)="onSubmit()" class="reset-form">
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input 
            type="password" 
            id="newPassword" 
            name="newPassword"
            [(ngModel)]="newPassword"
            placeholder="Enter your new password"
            class="form-control"
            [class.error]="errorMessage"
            required
            [disabled]="isLoading"
            minlength="6"
          />
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <input 
            type="password" 
            id="confirmPassword" 
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            placeholder="Confirm your new password"
            class="form-control"
            [class.error]="errorMessage"
            required
            [disabled]="isLoading"
            minlength="6"
          />
          <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
          </div>
        </div>

        <div class="password-requirements">
          <h4>Password Requirements:</h4>
          <ul>
            <li [class.valid]="newPassword.length >= 6">At least 6 characters long</li>
            <li [class.valid]="newPassword === confirmPassword && confirmPassword.length > 0">Passwords must match</li>
          </ul>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isLoading || !newPassword || !confirmPassword"
        >
          <span *ngIf="isLoading" class="spinner-small"></span>
          {{ isLoading ? 'Resetting...' : 'Reset Password' }}
        </button>

        <div class="form-footer">
          <button type="button" class="btn btn-link" (click)="goToLogin()">
            ← Back to Login
          </button>
          <button type="button" class="btn btn-link" (click)="requestNewReset()">
            Request New Reset
          </button>
        </div>
      </form>

      <!-- Success State -->
      <div *ngIf="isPasswordReset" class="success-state">
        <div class="success-icon">✓</div>
        <h3>Password Reset Successfully!</h3>
        <p>{{ successMessage }}</p>
        <div class="countdown">
          <p>Redirecting to login page in <span class="countdown-number">3</span> seconds...</p>
        </div>
        <button class="btn btn-primary" (click)="goToLogin()">
          Go to Login Now
        </button>
      </div>

      <!-- Error State for Invalid Link -->
      <div *ngIf="errorMessage && !newPassword && !confirmPassword" class="error-state">
        <div class="error-icon">✗</div>
        <h3>Invalid Reset Link</h3>
        <p>{{ errorMessage }}</p>
        <div class="error-actions">
          <button class="btn btn-primary" (click)="requestNewReset()">
            Request New Reset
          </button>
          <button class="btn btn-secondary" (click)="goToLogin()">
            Back to Login
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
